{
    "builders": [
       {
        "type" : "amazon-ebs",
        "region": "us-east-1",
        "source_ami": "ami-087c17d1fe0178315",
        "instance_type": "t2.micro",
        "ssh_username": "ec2-user",
        "ami_name": "wordpress-{{timestamp}}"
       }  
    ],
    "provisioners": {
        "type" : "shell",
        "inline": [
            "sudo yum install httpd wget git -y",
            "sudo yum install php php-mysql -y",
            "sudo yum install php-gd mariadb-server mariadb -y",
            "sudo yum install mysql -y",
            "sudo systemctl start httpd",
            "sudo systemctl enable httpd.service",
            "sudo systemctl start mariadb",
            "sudo systemctl enable mariadb.service",
            "sudo systemctl restart httpd.service",
            "wget https://wordpress.org/wordpress-{{WORDPRESS_VERSION}}.tar.gz",
            "tar xzvf {{WORDPRESS_VERSION}}*",
            "sudo rsync -avP ~/wordpress/ /var/www/html/",
            "mkdir /var/www/html/wp-content/uploads",
            "sudo chown -R apache:apache /var/www/html/*"
        ]

    }
}